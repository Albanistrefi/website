---
import Layout from '@/layouts/Layout.astro';
import { Header, Footer, GitHubActivity } from '@/components';
import { GitHubIcon, LinkedInIcon, EmailIcon } from '@/components/Icons';
import { Image } from 'astro:assets';
import albanImage from '../assets/alban.jpg';

const skills = [
  'JavaScript', 'TypeScript', 'React', 'Next.js', 
  'Astro', 'Node.js', 'Tailwind CSS', 'Design Systems', 'Web Performance'
];

let activityData = [];
try {
  const res = await fetch('https://github-contributions-api.jogruber.de/v4/Albanistrefi');
  const data = await res.json();
  activityData = data.contributions || [];
} catch (e) {
  console.error("Failed to fetch GitHub activity:", e);
}
---

<Layout
  title="About - Alban Istrefi"
  description="Learn more about Alban Istrefi, software developer and technical writer"
>
  <Header />

  <main class="page-shell mx-auto max-w-[900px]">
    <section class="mt-12 mb-16">
      <div class="grid grid-cols-1 md:grid-cols-[1fr_1.5fr] gap-12 items-start">
        {/* Left Column: Image */}
        <div class="relative order-1">
          <div class="aspect-square md:aspect-[4/5] w-full rounded-2xl overflow-hidden bg-background-secondary border border-border">
             <Image 
              src={albanImage} 
              alt="Alban Istrefi" 
              width={600} 
              class="w-full h-full object-cover"
            />
          </div>
        </div>

        {/* Right Column: Text */}
        <div class="space-y-8 order-2">
          <h1 class="text-[2rem] leading-[1.2] font-semibold text-text-primary">
            About Me
          </h1>

          <div class="space-y-6 text-text-secondary text-[1rem] leading-relaxed">
            <p>
              Hi, I'm Alban Istrefi, a software developer passionate about building great web experiences.
              I specialize in modern web development, design systems, and creating tools that make developers' lives easier.
            </p>

            <p>
              I write about web development, design patterns, TypeScript, React, and the ever-evolving
              landscape of frontend engineering. My goal is to share what I learn and help others grow
              in their development journey.
            </p>

            <p>
              When I'm not coding, you can find me exploring new technologies, contributing to open source,
              or writing about my experiences building software.
            </p>
          </div>

          <div class="pt-4">
             <h2 class="text-sm font-medium uppercase tracking-wide text-text-tertiary mb-4">
              Connect
            </h2>
            <div class="flex gap-4">
              <a href="https://github.com" target="_blank" rel="noopener noreferrer" class="text-text-secondary hover:text-accent-primary transition-colors" aria-label="GitHub">
                <GitHubIcon size="1.5rem" />
              </a>
              <a href="https://linkedin.com" target="_blank" rel="noopener noreferrer" class="text-text-secondary hover:text-accent-primary transition-colors" aria-label="LinkedIn">
                <LinkedInIcon size="1.5rem" />
              </a>
              <a href="mailto:hello@example.com" class="text-text-secondary hover:text-accent-primary transition-colors" aria-label="Email">
                <EmailIcon size="1.5rem" />
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="mb-20">
      <h2 class="text-[1.5rem] leading-[1.3] font-semibold mb-8 text-text-primary">
        GitHub Activity
      </h2>
      <div class="bg-background-secondary border border-border p-6 rounded-2xl overflow-hidden flex justify-center">
        {activityData.length > 0 ? (
          <GitHubActivity client:load data={activityData} />
        ) : (
          <div class="text-text-muted text-sm py-4">
            Unable to load activity graph. <a href="https://github.com/Albanistrefi" class="text-accent-primary underline">View on GitHub</a>
          </div>
        )}
      </div>
      <p class="mt-4 text-text-secondary text-sm">
        Follow me on <a href="https://github.com/Albanistrefi" target="_blank" rel="noopener noreferrer" class="text-accent-primary hover:underline">GitHub</a> to see what I'm currently building.
      </p>
    </section>

    <section class="mb-20">
      <h2 class="text-[1.5rem] leading-[1.3] font-semibold mb-8 text-text-primary">
        What I Work With
      </h2>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
        {skills.map((skill) => (
          <div class="bg-background-secondary border border-border px-4 py-3 rounded-lg text-center text-text-secondary font-medium text-sm hover:border-accent-primary transition-colors cursor-default">
            {skill}
          </div>
        ))}
      </div>
    </section>
  </main>

  <Footer />
</Layout>